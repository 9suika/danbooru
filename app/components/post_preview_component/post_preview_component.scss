@import "../../javascript/src/styles/base/000_vars.scss";

article.post-preview {
  display: inline-flex;
  flex-direction: column;
  place-items: center;
  position: relative;
  overflow: hidden;

  .post-preview-link {
    display: inline-block;
    position: relative;

    .post-animation-icon {
      color: var(--preview-icon-color);
      background: var(--preview-icon-background);
    }
  }

  &.captioned {
    height: auto;
    vertical-align: text-top;
  }

  &.post-preview-fit-fixed {
    &.post-preview-150  { min-width: 150px; min-height: 150px; }
    &.post-preview-180  { min-width: 180px; min-height: 180px; }
    &.post-preview-225  { min-width: 225px; min-height: 225px; }
    &.post-preview-225w { min-width: 225px; min-height: 360px; }
    &.post-preview-270  { min-width: 270px; min-height: 270px; }
    &.post-preview-270w { min-width: 270px; min-height: 360px; }
    &.post-preview-360  { min-width: 360px; min-height: 360px; }
  }

  .desc {
    font-size: var(--text-sm);
    margin-bottom: 0;
    text-align: center;
  }
}

.post-preview-image {
  max-width: 100%;
  height: auto;
}

@media screen and (min-width: 660px) {
  .post-preview-225 .post-preview-image { max-height: 225px; }
  .post-preview-270 .post-preview-image { max-height: 270px; }
}

.post-preview {
  img {
    border: 2px solid transparent;
  }

  &.post-status-has-children img {
    border-color: var(--preview-has-children-color);
  }

  &.post-status-has-parent img {
    border-color: var(--preview-has-parent-color);
  }

  &.post-status-has-children.post-status-has-parent img {
    border-color: var(--preview-has-children-color) var(--preview-has-parent-color) var(--preview-has-parent-color) var(--preview-has-children-color);
  }

  &.post-status-deleted img {
    border-color: var(--preview-deleted-color);
  }

  &.post-status-has-children.post-status-deleted img {
    border-color: var(--preview-has-children-color) var(--preview-deleted-color) var(--preview-deleted-color) var(--preview-has-children-color);
  }

  &.post-status-has-parent.post-status-deleted img {
    border-color: var(--preview-has-parent-color) var(--preview-deleted-color) var(--preview-deleted-color) var(--preview-has-parent-color);
  }

  &.post-status-has-children.post-status-has-parent.post-status-deleted img {
    border-color: var(--preview-has-children-color) var(--preview-deleted-color) var(--preview-deleted-color) var(--preview-has-parent-color);
  }

  /* Pending and flagged posts have blue borders (except in the modqueue). */
  &.post-status-pending:not(.mod-queue-preview) img,
  &.post-status-flagged:not(.mod-queue-preview) img {
    border-color: var(--preview-pending-color);
  }

  &.post-status-has-children.post-status-pending:not(.mod-queue-preview) img,
  &.post-status-has-children.post-status-flagged:not(.mod-queue-preview) img {
    border-color: var(--preview-has-children-color) var(--preview-pending-color) var(--preview-pending-color) var(--preview-has-children-color);
  }

  &.post-status-has-parent.post-status-pending:not(.mod-queue-preview) img,
  &.post-status-has-parent.post-status-flagged:not(.mod-queue-preview) img {
    border-color: var(--preview-has-parent-color) var(--preview-pending-color) var(--preview-pending-color) var(--preview-has-parent-color);
  }

  &.post-status-has-children.post-status-has-parent.post-status-pending:not(.mod-queue-preview) img,
  &.post-status-has-children.post-status-has-parent.post-status-flagged:not(.mod-queue-preview) img {
    border-color: var(--preview-has-children-color) var(--preview-pending-color) var(--preview-pending-color) var(--preview-has-parent-color);
  }
}

/* Flagged posts have red borders for approvers. */
body[data-current-user-can-approve-posts="true"] .post-preview {
  &.post-status-flagged img {
    border-color: var(--preview-flagged-color);
  }

  &.post-status-has-children.post-status-flagged img {
    border-color: var(--preview-has-children-color) var(--preview-flagged-color) var(--preview-flagged-color) var(--preview-has-children-color);
  }

  &.post-status-has-parent.post-status-flagged img {
    border-color: var(--preview-has-parent-color) var(--preview-flagged-color) var(--preview-flagged-color) var(--preview-has-parent-color);
  }

  &.post-status-has-children.post-status-has-parent.post-status-flagged img {
    border-color: var(--preview-has-children-color) var(--preview-flagged-color) var(--preview-flagged-color) var(--preview-has-parent-color);
  }
}

@media screen and (max-width: 660px) {
  .post-preview-image {
    border: none !important;
  }
}
